extends ../../layouts/default.pug

block main
  .container.py-4
    // Breadcrumb
    nav(aria-label="breadcrumb")
      ol.breadcrumb.bg-light
        li.breadcrumb-item
          a(href="/") Trang chá»§
        li.breadcrumb-item
          a(href="/products") Sáº£n pháº©m
        li.breadcrumb-item.active(aria-current="page")= product.title

    // Product Detail
    .card.mb-4
      .row.no-gutters
        // Product Image
        .col-md-5.border-right
          .position-relative
            if product.discountPercentage > 0
              .position-absolute.p-2
                span.badge.badge-danger -#{Math.round(product.discountPercentage)}%
            
            .p-3.text-center
              img.img-fluid(src=product.thumbnail alt=product.title style="max-height:350px;")
        
        // Product Info
        .col-md-7
          .card-body
            // Status and Title
            if product.status === 'active'
              span.badge.badge-success.mb-2 CÃ²n hÃ ng
            else
              span.badge.badge-secondary.mb-2 Ngá»«ng kinh doanh
            
            h1.h2.mb-3= product.title
            
            // Rating
            .mb-3
              i.text-warning â˜…
              i.text-warning â˜…
              i.text-warning â˜…
              i.text-warning â˜…
              i.text-warning â˜†
              span.text-muted.ml-2 (16 Ä‘Ã¡nh giÃ¡)
            
            // Price
            .mb-4
              if product.discountPercentage > 0
                h3.text-danger.d-inline-block.mr-2 $#{(product.price * (1 - product.discountPercentage/100)).toFixed(2)}
                h5.text-muted.d-inline-block
                  del $#{product.price.toFixed(2)}
              else
                h3 $#{product.price.toFixed(2)}
            
            // Description
            .mb-4
              h5.font-weight-bold MÃ´ táº£ sáº£n pháº©m
              p.text-muted= product.description
            
            // Features
            // Features
            .mb-4
              h5.font-weight-bold TÃ­nh nÄƒng ná»•i báº­t
              ul.text-muted
                each feature in product.features
                  li= feature
            
            // Stock & Quantity
            .row.mb-4
              .col-md-6
                p.mb-1
                  strong Tá»“n kho: 
                  span.text-success #{product.stock} sáº£n pháº©m
              
              .col-md-6
                .form-group.mb-0
                  label.font-weight-bold.mb-2 Sá»‘ lÆ°á»£ng:
                  .input-group(style="width: 140px;")
                    .input-group-prepend
                      button.btn.btn-outline-secondary(type="button") -
                    input.form-control.text-center(type="number" value="1" min="1" max=product.stock)
                    .input-group-append
                      button.btn.btn-outline-secondary(type="button") +
            
            // Action Buttons
            .mb-3
              button.btn.btn-primary.btn-lg.mr-2.mb-2
                i.mr-2 ðŸ›’
                | ThÃªm vÃ o giá» hÃ ng
              button.btn.btn-outline-primary.btn-lg.mb-2
                i.mr-2 âš¡
                | Mua ngay

    // Product Tabs
    ul.nav.nav-tabs.mb-3#productTabs
      li.nav-item
        a.nav-link.active#specs-tab(data-toggle="tab" href="#specs") ThÃ´ng sá»‘ ká»¹ thuáº­t
      li.nav-item
        a.nav-link#reviews-tab(data-toggle="tab" href="#reviews") ÄÃ¡nh giÃ¡ (16)
      li.nav-item
        a.nav-link#warranty-tab(data-toggle="tab" href="#warranty") Báº£o hÃ nh
    
    .tab-content.mb-5
      // Specifications Tab
      .tab-pane.fade.show.active#specs
        .card
          .card-body
            .row
              .col-md-6
                table.table.table-bordered.table-striped
                  tbody
                    tr
                      th(width="40%") ThÆ°Æ¡ng hiá»‡u
                      td #{product.brand}
                    tr
                      th CÃ´ng suáº¥t lÃ m láº¡nh
                      td 9000 BTU
                    tr
                      th CÃ´ng nghá»‡
                      td Inverter
                    tr
                      th Diá»‡n tÃ­ch phÃ²ng
                      td 15-20mÂ²
                    tr
                      th Báº£o hÃ nh
                      td 12 thÃ¡ng chÃ­nh hÃ£ng
              
              .col-md-6
                table.table.table-bordered.table-striped
                  tbody
                    tr
                      th(width="40%") Khá»‘i lÆ°á»£ng
                      td 10.5 kg
                    tr
                      th KÃ­ch thÆ°á»›c
                      td 80 x 28 x 20 cm
                    tr
                      th Gas lÃ m láº¡nh
                      td R32 (thÃ¢n thiá»‡n mÃ´i trÆ°á»ng)
                    tr
                      th Äá»™ á»“n
                      td 25-40 dB
                    tr
                      th Xuáº¥t xá»©
                      td Nháº­t Báº£n
      
      // Reviews Tab
      .tab-pane.fade#reviews
        .card
          .card-body
            .d-flex.justify-content-between.mb-4
              h5 ÄÃ¡nh giÃ¡ tá»« khÃ¡ch hÃ ng
              button.btn.btn-outline-primary Viáº¿t Ä‘Ã¡nh giÃ¡
            
            // Review 1
            .media.mb-4.pb-3.border-bottom
              img.mr-3.rounded-circle(src="https://via.placeholder.com/50" alt="Avatar" width="50" height="50")
              .media-body
                h6.mt-0 Nguyá»…n VÄƒn A
                div.mb-1
                  i.text-warning â˜…
                  i.text-warning â˜…
                  i.text-warning â˜…
                  i.text-warning â˜…
                  i.text-warning â˜…
                p Sáº£n pháº©m ráº¥t tá»‘t, lÃ m mÃ¡t nhanh vÃ  tiáº¿t kiá»‡m Ä‘iá»‡n. Äáº·c biá»‡t lÃ  ráº¥t Ãªm, khÃ´ng gÃ¢y tiáº¿ng á»“n khi hoáº¡t Ä‘á»™ng.
                small.text-muted 15/04/2025
            
            // Review 2
            .media.mb-4.pb-3.border-bottom
              img.mr-3.rounded-circle(src="https://via.placeholder.com/50" alt="Avatar" width="50" height="50")
              .media-body
                h6.mt-0 Tráº§n Thá»‹ B
                div.mb-1
                  i.text-warning â˜…
                  i.text-warning â˜…
                  i.text-warning â˜…
                  i.text-warning â˜…
                  i.text-warning â˜†
                p Thiáº¿t káº¿ Ä‘áº¹p, láº¯p Ä‘áº·t dá»… dÃ ng. NhÃ¢n viÃªn giao hÃ ng vÃ  láº¯p Ä‘áº·t nhiá»‡t tÃ¬nh. Tuy nhiÃªn Ä‘iá»u khiá»ƒn tá»« xa hÆ¡i nháº¡y cáº£m.
                small.text-muted 10/04/2025
      
      // Warranty Tab
      .tab-pane.fade#warranty
        .card
          .card-body
            h5.font-weight-bold.mb-3 ChÃ­nh sÃ¡ch báº£o hÃ nh
            p #{product.warranty}
            
            h6.font-weight-bold.mt-4.mb-2 Äiá»u kiá»‡n báº£o hÃ nh:
            ul.mb-4
              li Sáº£n pháº©m cÃ²n trong thá»i gian báº£o hÃ nh
              li Tem báº£o hÃ nh, mÃ£ sáº£n pháº©m cÃ²n nguyÃªn váº¹n
              li Sáº£n pháº©m lá»—i do nhÃ  sáº£n xuáº¥t
            
            h6.font-weight-bold.mb-2 KhÃ´ng báº£o hÃ nh trong cÃ¡c trÆ°á»ng há»£p:
            ul
              li Sáº£n pháº©m háº¿t thá»i háº¡n báº£o hÃ nh
              li Sáº£n pháº©m bá»‹ tÃ¡c Ä‘á»™ng bá»Ÿi ngÆ°á»i dÃ¹ng: va Ä‘áº­p, tráº§y xÆ°á»›c, vá»¡
              li Sáº£n pháº©m bá»‹ hÆ° há»ng do thiÃªn tai, há»a hoáº¡n
              li Sáº£n pháº©m Ä‘Ã£ bá»‹ can thiá»‡p, sá»­a chá»¯a bá»Ÿi Ä‘Æ¡n vá»‹ khÃ´ng Ä‘Æ°á»£c á»§y quyá»n

    // Related Products
    h3.mb-4 Sáº£n pháº©m tÆ°Æ¡ng tá»±
    .row
      - const relatedProducts = [{ name: 'Äiá»u hÃ²a Samsung', price: 950 }, { name: 'Äiá»u hÃ²a LG', price: 850, discount: 950 }, { name: 'Äiá»u hÃ²a Panasonic', price: 1050 }, { name: 'Äiá»u hÃ²a Mitsubishi', price: 1150, discount: 1350 }]
      each product, index in relatedProducts
        .col-md-3.col-6.mb-4
          .card.h-100
            .position-relative
              if product.discount
                .position-absolute.p-2
                  span.badge.badge-danger -#{Math.round((1 - product.price/product.discount) * 100)}%
              img.card-img-top.p-3(src="https://via.placeholder.com/300" alt=product.name)
            
            .card-body
              h5.card-title= product.name
              .mb-2
                if product.discount
                  span.text-danger.font-weight-bold.mr-2 $#{product.price}
                  del.text-muted $#{product.discount}
                else
                  span.font-weight-bold $#{product.price}
              
              div
                i.text-warning â˜…
                i.text-warning â˜…
                i.text-warning â˜…
                i.text-warning â˜…
                i.text-warning â˜†
            
            .card-footer.bg-white.border-top-0
              a.btn.btn-sm.btn-outline-primary.btn-block(href="#") Xem chi tiáº¿t

  script.
    $(document).ready(function() {
      // Basic tab functionality provided by Bootstrap
      $('#productTabs a').on('click', function (e) {
        e.preventDefault()
        $(this).tab('show')
      })
      
      // Quantity buttons
      $('.input-group-prepend button').click(function() {
        var input = $(this).closest('.input-group').find('input');
        var value = parseInt(input.val());
        if (value > 1) {
          input.val(value - 1);
        }
      });
      
      $('.input-group-append button').click(function() {
        var input = $(this).closest('.input-group').find('input');
        var value = parseInt(input.val());
        var max = parseInt(input.attr('max'));
        if (value < max) {
          input.val(value + 1);
        }
      });
    });